
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Ship a REST API with Node, ES6 and MongoDB - Part 1 - Prab's Code Blog</title>
  <meta name="author" content="Prabhakar Kumar">

  
  <meta name="description" content="Introduction NodeJS has been gaining a lot of traction recently, especially for web applications. Lots of new web applications
are now being built &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://prabhakar97.github.io/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Prab's Code Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-20481925-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Prab's Code Blog</a></h1>
  
    <h2>Because talk is cheap, show me the code!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:prabhakar97.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Ship a REST API With Node, ES6 and MongoDB - Part 1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-03-22T21:52:40+05:30" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Introduction</h2>

<p>NodeJS has been gaining a lot of traction recently, especially for web applications. Lots of new web applications
are now being built with tools from  the Node ecosystem. A possible reason is the umpteen number of javascript
developers out in the wild. Other one is  the blazing speed of
<a href="https://en.wikipedia.org/wiki/V8_(JavaScript_engine">V8 engine</a>). Heck, even shiny desktop apps are now being built
with Node viz. Popcorn Time.</p>

<p>In this post I will walk through everything I did to ship an API app. Ship as in - ready to serve production traffic.</p>

<h3>About the stack</h3>

<p>We will be using <a href="https://expressjs.com/">Express</a> as our web app framework. Express is minimalistic, fast and quietly
gets out of our way when you want to detour through the dirt road. It is unlike convention over configuration style in
<a href="http://rubyonrails.org/">Rails</a> and <a href="https://playframework.com/">Play framework</a> where you are good as long as you
follow the conventions recommended by the framework. Going gets tough, if you start deviating. There are frameworks
built specifically for facilitating API building. An example would be <a href="http://restify.com/">Restify</a>. The reason of
not choosing such a framework for this exercise is to understand the intricacies of building an API. Restify would
shield us from understanding lots of stuff.</p>

<p>Also, we wil be writing our javascript in <a href="http://es6-features.org/">ES6</a> which is cleaner and hands down a better
language than the javascript specced in ES5. Latest version of node still doesn&rsquo;t fully support ES6, so we will use a
transpiler named <a href="http://babeljs.io/">Babel</a> which transpiles code written by us into code conforming to ES5 for which
node has full support. In the future when node catches up, we can turn off transpilation and run our ES6 code directly
with node.</p>

<p><a href="https://www.mongodb.com/">MongoDB</a> will be our database. It is a document oriented NoSQL database. What that means
is - it is unlike the RDBMSes like MySQL or Oracle which let you model the world by defining a schema in form
of tables recording their properties and then linking them with primary and foreign keys. With MongoDB we model our
worldly entities in form of documents which are similar to JSON objects . The biggest advantage of NoSQL databases like
MongoDB is that they are designed to be horizontally scalable - whenever we need to increase performance, we just
add few more machines to the DB cluster and the database engine takes care of redistributing data and query traffic
across all available machines. RDBMSes are limited by theory, in terms of horizontal scalability. A discussion of this
is beyond the scope of this article, but if you are interested in knowing more about it you can browse the interwebs
for this nuisance called CAP theorem.</p>

<h3>About the project</h3>

<p>We are going to build an API which can power a web application and/or a mobile app. The app is a social code snippet
sharing system where the users can share frequently encountered code snippets that are used in a developer&rsquo;s day to
day life for solving mundane problems which they are too lazy to code themselves. Usually, as developers we google for
our problem, find link to a stackoverflow question and copy the snippet from there and use from. In our case we let
the users share the snippet, enter a description, select the language, optionally add some tags and publish it. A user
can also thumb up a snippet or mark it as junk. We also allow some experienced users to edit the snippets and/or
descriptions for clarity. We define experience with a formula derived from number of upvotes to their questions by
other users, their age on the site and their time spent on the site. Also, we do away with logins through passwords.
We provide OAuth based logins through Google, Facebook, Twitter etc. Apart from these functional features, we will
also do some non-functional stuff like generate an SEO friendly URL for each snippet so that Googlebot can find our
snippets and list in search results. Let&rsquo;s wear the product manager hat for a moment and write down the high level
product requirements for our application.</p>

<h4>As a guest user I should be able to</h4>

<ul>
<li>search for snipppets through description and/or code matches</li>
<li>list snippets by language, and sort them by

<ul>
<li>most voted</li>
<li>most viewed</li>
</ul>
</li>
<li>login using Google, Facebook or Twitter auth</li>
</ul>


<h4>As a logged-in user I should be able to</h4>

<ul>
<li>perform snippet operations

<ul>
<li>post a snippet</li>
<li>edit my posted snippets</li>
<li>view a snippet and see all previous versions of a snippet, if they have been edited</li>
</ul>
</li>
<li>perform profile operations

<ul>
<li>view my profile</li>
<li>refresh upstream information in the profile</li>
<li>view others' profiles</li>
<li>view activity of a user, like snippets posted, snippets upvoted, snippets edited etc.</li>
</ul>
</li>
<li>perform friendship operations

<ul>
<li>send friend requests to people</li>
<li>accept/reject others' friend requests</li>
<li>ignore/block a user</li>
</ul>
</li>
<li>perform feed operations

<ul>
<li>view a feed which shows my friends' activity on the website</li>
<li>like and comment on activities in the feed</li>
</ul>
</li>
<li>perform leaderboard operations

<ul>
<li>view leaderboard of snippets</li>
<li>view leaderboard of users</li>
<li>filter leaderboard by language, user location etc.</li>
</ul>
</li>
<li>perform messaging operations

<ul>
<li>send private messages to my friends</li>
<li>send private messages to non-friends</li>
<li>view my inbox, categorized with messages from friends/non-friends</li>
</ul>
</li>
</ul>


<h3>Why API?</h3>

<p>Let&rsquo;s take a step back and understand why should we write an API? Why not a simple MVC web application? APIs are great
for scaling, technically as well as logistically. With an API, we define a set of operations, which cover all the
interactions of users and other systems with our application. Then we write client apps, which talk to the API and get
the job done. So, next time you swipe left in gmail to archive an email, you should know that an API call has been
made by the GMail app residing on your phone, to the GMail servers along with some parameters which did the actual
archiving of the email.</p>

<p>What is logistic stability? Ok, I just made up this term! With an API as contract in place, the client app can
independently scale with the actual functional implementation. We can have different people (or teams) working on the
different client apps. As long as they have the API spec they can work independently. Also, the same API can power a
native iOS app, an Android app, a mobile website and a web application. These client apps make API calls to fetch and
display relevant data and perform operations upon user interactions.</p>

<p>In terms of technical scalability, the people working on the backend can independently scale the most used operations
in the API. For instance, if we are getting millions of calls for our compute intensive <code>findBugs</code> operation in a
day, we can intelligently increase the resources it needs. One way would be to have a dedicated independent machine of
high configuration just for this operation in the API. And we leverage the power of distributed systems and horizontal
scalability! We will get into the details of this when we talk about shipping once we are code complete.</p>

<h2>Dev Env setup</h2>

<p>Before we design our data model, let&rsquo;s get our hands dirty a bit, write a hello world app with Express and get MongoDB
setup on our workstation.</p>

<p>I am an <a href="https://www.archlinux.org/">Arch Linux</a> devotee. The instructions here should work perfectly on Arch. The
onus of changing the commands to suit your package manager(apt, yum, emerge, brew) is upto you.</p>

<h3>Install node, npm and mongodb</h3>

<p>The following commands will install <code>node</code>, <code>npm</code> and <code>mongodb</code> for us. <code>node</code> is the javascript runtime executable
which is actually going to run our code. <code>npm</code> is the package manager which takes care of resolving dependencies on
third party libraries, downloading them and setting up their paths correctly so that we have a lot of pre-written
code in form of modules available at our disposal.</p>

<p>Mongodb will also be started and enabled for autostart. If you don&rsquo;t want it to be auto started everytime you boot,
don&rsquo;t execute the last command.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo pacman -Syu node npm mongodb
</span><span class='line'>
</span><span class='line'>sudo systemctl start mongodb
</span><span class='line'>
</span><span class='line'>sudo systemctl <span class="nb">enable </span>mongodb
</span></code></pre></td></tr></table></div></figure>


<p>As of this writing, I got node 7.2, npm 4.0 and mongodb 3.2. The javascript ecosystem is a very fast moving one. Some
of the code mentioned hereon might get obsolete in a couple of years but the general idea remains the same.</p>

<h3>Setup the initial package.json</h3>

<p>In the node world <code>package.json</code> is the file which contains the details of our dependencies and run configurations.
In Rails world, it is analogous to <code>Gemfile</code> but on steroids. In java world it is kind of analogous to <code>build.gradle</code>
or a <code>pom.xml</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>mkdir -p ~/Documents/Projects/js-snipcode
</span><span class='line'><span class="nb">cd</span> !<span class="err">$</span>
</span><span class='line'>npm init
</span></code></pre></td></tr></table></div></figure>


<p> The second command might seem unfamiliar. !$ represents the last paramter of previous command in bash and zsh. So it
will just take you to the newly created directory from the previous step.</p>

<p>The <code>npm init</code> is interactive and it will first ask you for a project name. Then configure the version and description.
Next it asks for the entry point for the app. You can leave it as <code>index.js</code>. Keep pressing enter to accept the
defaults for other fields or change if you like. For now we ignore the test command. A <code>package.json</code> file will be
created in the end.</p>

<h3>Install Express</h3>

<p>Express is the web framework library that we are going to use. Now let&rsquo;s add a dependency on Express, add babel
transpilation of ES6 and get from zero to &ldquo;Hello World!&rdquo;.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm install express --save
</span><span class='line'>npm install --save-dev babel-cli babel-preset-latest
</span></code></pre></td></tr></table></div></figure>


<p>Running the above commands will download Express, babel-cli and babel&rsquo;s latest preset. <code>--save</code> flag makes an entry in
the <code>dependencies</code> section of package.json. Guess what does the <code>--save-dev</code> flag do? You got it right! It makes an
entry in <code>devDependencies</code> in <code>package.json</code>. Dev dependencies are different from dependencies in that they
are not required for running the app. They are only used during development, for instance for transpilation during
build. Let&rsquo;s also add two target scripts named <code>build</code> and <code>start</code> in the <code>package.json</code>. Running <code>npm run build</code> will
tell babel to transpile everything in <code>src</code> directory recursively and output the transpiled files in <code>dist</code> directory.
<code>npm run start</code> in the root directory of our project will start our web server by running the command
<code>node dist/index.js</code>. Also, don&rsquo;t forget <code>mkdir src; mv index.js src</code>. Here&rsquo;s the updated <code>package.json</code>.</p>

<figure class='code'><figcaption><span>package.json</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;js-snipcode&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;API in NodeJS for the Snipcode project.&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;main&quot;</span><span class="p">:</span> <span class="s2">&quot;index.js&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;scripts&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;test&quot;</span><span class="p">:</span> <span class="s2">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;build&quot;</span><span class="p">:</span> <span class="s2">&quot;babel src -d dist --presets latest&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;node dist/index.js&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Prabhakar Kumar&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;license&quot;</span><span class="p">:</span> <span class="s2">&quot;ISC&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;express&quot;</span><span class="p">:</span> <span class="s2">&quot;^4.14.0&quot;</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="nt">&quot;devDependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;babel-cli&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.18.0&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;babel-preset-latest&quot;</span><span class="p">:</span> <span class="s2">&quot;^6.18.0&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Zero to Hello World!</h3>

<p>Let&rsquo;s edit our <code>src/index.js</code> and write relevant code to make a Hello World app.</p>

<figure class='code'><figcaption><span>index.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kr">import</span> <span class="nx">express</span> <span class="nx">from</span> <span class="s1">&#39;express&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="nx">res</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server is up on port 3000!&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&rsquo;s build and run.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>npm run build
</span><span class='line'>npm run start
</span></code></pre></td></tr></table></div></figure>


<p>If everything went well as we discussed, you will see a message on the console that says server is up on port 3000.
Now if you fire up firefox or chromium and go to <a href="http://localhost:3000">localhost:3000</a>, you will see the evergreen
&lsquo;Hello world!&rsquo; message staring at you on a white screen.</p>

<p>Before we start writing more code, I&rsquo;ll explain the meaning of the lines in our Hello World web app. But, before that
let&rsquo;s pivot and focus on learning our database and design a basic data model.</p>

<h3>Play with mongo console</h3>

<p>Let&rsquo;s play with mongo console a bit to gain some familiarity with it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>$ mongo
</span><span class='line'>MongoDB shell version: 3.2.10
</span><span class='line'>connecting to: test
</span><span class='line'>Welcome to the MongoDB shell.
</span><span class='line'>For interactive help, type &quot;help&quot;.
</span><span class='line'>For more comprehensive documentation, see
</span><span class='line'>        http://docs.mongodb.org/
</span><span class='line'>Questions? Try the support group
</span><span class='line'>        http://groups.google.com/group/mongodb-user
</span><span class='line'>Server has startup warnings:
</span><span class='line'>2016-12-04T07:40:24.545-0500 I CONTROL  [initandlisten]
</span><span class='line'>2016-12-04T07:40:24.545-0500 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is &#39;always&#39;.
</span><span class='line'>2016-12-04T07:40:24.545-0500 I CONTROL  [initandlisten] **        We suggest setting it to &#39;never&#39;
</span><span class='line'>2016-12-04T07:40:24.545-0500 I CONTROL  [initandlisten]
</span><span class='line'>&gt; show databases
</span><span class='line'>local  0.000GB
</span><span class='line'>&gt; use snipcode
</span><span class='line'>switched to db snipcode
</span><span class='line'>&gt; db.users.insert({name: &quot;John Doe&quot;, country: &quot;United States&quot;, &quot;sex&quot;: &#39;M&#39;, dob: ISODate(&#39;1970-01-01&#39;)})
</span><span class='line'>WriteResult({ &quot;nInserted&quot; : 1 })
</span><span class='line'>&gt; db.users.find()
</span><span class='line'>{ &quot;_id&quot; : ObjectId(&quot;58441a27d01af6e5b1ae6f74&quot;), &quot;name&quot; : &quot;John Doe&quot;, &quot;country&quot; : &quot;United States&quot;, &quot;sex&quot; : &quot;M&quot;, &quot;dob&quot; : ISODate(&quot;1970-01-01T00:00:00Z&quot;) ers.insert({name: &quot;Jane Doe&quot;, country: &quot;United States&quot;, &quot;sex&quot;: &#39;F&#39;, dob: ISODate(&#39;1970-01-01&#39;)})
</span><span class='line'>WriteResult({ &quot;nInserted&quot; : 1 })
</span><span class='line'>&gt; db.users.find()
</span><span class='line'>{ &quot;_id&quot; : ObjectId(&quot;58441a27d01af6e5b1ae6f74&quot;), &quot;name&quot; : &quot;John Doe&quot;, &quot;country&quot; : &quot;United States&quot;, &quot;sex&quot; : &quot;M&quot;, &quot;dob&quot; : ISODate(&quot;1970-01-01T00:00:00Z&quot;) }
</span><span class='line'>{ &quot;_id&quot; : ObjectId(&quot;58441a5bd01af6e5b1ae6f75&quot;), &quot;name&quot; : &quot;Jane Doe&quot;, &quot;country&quot; : &quot;United States&quot;, &quot;sex&quot; : &quot;F&quot;, &quot;dob&quot; : ISODate(&quot;1970-01-01T00:00:00Z&quot;) }
</span><span class='line'>&gt; db.users.find({sex: &#39;F&#39;})
</span><span class='line'>{ &quot;_id&quot; : ObjectId(&quot;58441a5bd01af6e5b1ae6f75&quot;), &quot;name&quot; : &quot;Jane Doe&quot;, &quot;country&quot; : &quot;United States&quot;, &quot;sex&quot; : &quot;F&quot;, &quot;dob&quot; : ISODate(&quot;1970-01-01T00:00:00Z&quot;) }
</span></code></pre></td></tr></table></div></figure>


<p>Similar to MySQL and friends (MariaDB, Aurora), Mongodb organizes it&rsquo;s data in databases. We don&rsquo;t need to explicitly
create a database unlike MySQL. It gets created as soon as we try to write something to it. Inside a Mongodb database,
the database is organized in collections. A collection is analogous to tables in RDBMS, and more flexible. A
collection doesn&rsquo;t have a fixed schema. So, one document (record/row in RDBMS) can have fields different from others
in the same collection. In the above example, we switched to database named <code>snipcode</code>. Then we inserted a document
describing a user named &lsquo;John Doe&rsquo;. Upon doing a <code>find()</code> (which is analogous to SQL&rsquo;s SELECT) on that collection we
got the record, along with a unique record ID called ObjectID. Then we inserted another record for <code>Jane Doe</code>. Then we
ran a query which returns all female users. For this, we provided the query condition <code>sex: 'F'</code> which is similar to
WHERE sex = &lsquo;F&rsquo; in SQL.</p>

<p>As of now, this much familiarity is enough for us to get started. We will dive deeper as and when we need.</p>

<h2>Next part</h2>

<p>In this part we got bootstrapped and got our hands dirty. In the next part we will start with data modeling and
continue further. Stay tuned for it.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Prabhakar Kumar</span></span>

      








  


<time datetime="2017-03-22T21:52:40+05:30" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/es6/'>es6</a>, <a class='category' href='/blog/categories/linux/'>linux</a>, <a class='category' href='/blog/categories/mongodb/'>mongodb</a>, <a class='category' href='/blog/categories/nodejs/'>nodejs</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://prabhakar97.github.io/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux/" data-via="prab97" data-counturl="http://prabhakar97.github.io/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2017/03/11/elegant-solutions-to-common-interview-problems/" title="Previous Post: Elegant solutions to common interview problems - Part 1 - Linked Lists">&laquo; Elegant solutions to common interview problems - Part 1 - Linked Lists</a>
      
      
        <a class="basic-alignment right" href="/blog/2018/01/14/boot-linux-from-grub-rescue-prompt/" title="Next Post: Boot linux from grub rescue prompt">Boot linux from grub rescue prompt &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/arch-linux'>arch linux (1)</a></li><li><a href='/blog/categories/blabber'>blabber (1)</a></li><li><a href='/blog/categories/c-number'>c#, (1)</a></li><li><a href='/blog/categories/design'>design (1)</a></li><li><a href='/blog/categories/es6'>es6 (1)</a></li><li><a href='/blog/categories/functional-programming'>functional programming (1)</a></li><li><a href='/blog/categories/haskell'>haskell (2)</a></li><li><a href='/blog/categories/linux'>linux (4)</a></li><li><a href='/blog/categories/mongodb'>mongodb (2)</a></li><li><a href='/blog/categories/nodejs'>nodejs (2)</a></li><li><a href='/blog/categories/octopress'>octopress (1)</a></li><li><a href='/blog/categories/patterns'>patterns (1)</a></li><li><a href='/blog/categories/programming'>programming (1)</a></li><li><a href='/blog/categories/rails'>rails (3)</a></li><li><a href='/blog/categories/recursion'>recursion (1)</a></li><li><a href='/blog/categories/ruby'>ruby (5)</a></li><li><a href='/blog/categories/shell'>shell (1)</a></li><li><a href='/blog/categories/web-apps'>web apps (2)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/03/17/make-your-if-statements-concise/">Make Your if Statements Concise</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/03/17/heres-a-fluent-builder-in-c-number/">Here's a Fluent Builder in C#</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/01/14/boot-linux-from-grub-rescue-prompt/">Boot Linux From Grub Rescue Prompt</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux/">Ship a REST API With Node, ES6 and MongoDB - Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/03/11/elegant-solutions-to-common-interview-problems/">Elegant Solutions to Common Interview Problems - Part 1 - Linked Lists</a>
      </li>
    
  </ul>
</section>
<section>
	<h1>Bitcoin</h1>
  <a href="bitcoin:1EpNzrBhsrfqgwZf7TzeAEtHr5dFmKnR2Z"><img src="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=1EpNzrBhsrfqgwZf7TzeAEtHr5dFmKnR2Z&choe=UTF-8" alt="Bitcoin"></a>
	<a href="bitcoin:1EpNzrBhsrfqgwZf7TzeAEtHr5dFmKnR2Z">1EpNzrBhsrfqgwZf7TzeAEtHr5dFmKnR2Z</a>
	<h1>Ethereum</h1>
	<a href="ethereum:0x81dBA40a63e116854003eB4e257c99b075756E65"><img src="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=0x81dBA40a63e116854003eB4e257c99b075756E65&choe=UTF-8" alt="Ethereum"></a>
	<a href="ethereum:0x81dBA40a63e116854003eB4e257c99b075756E65">0x81dBA40a63e116854003eB4e257c99b075756E65</a>
	<h1>Litecoin</h1>
	<a href="litecoin:MKSaEWqUKFus6FggPnZVaC66oYiFk9Mdcx"><img src="https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=MKSaEWqUKFus6FggPnZVaC66oYiFk9Mdcx&choe=UTF-8" alt="Litecoin"></a>
	<a href="litecoin:MKSaEWqUKFus6FggPnZVaC66oYiFk9Mdcx">MKSaEWqUKFus6FggPnZVaC66oYiFk9Mdcx</a>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Prabhakar Kumar -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'techbite';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://prabhakar97.github.io/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux/';
        var disqus_url = 'http://prabhakar97.github.io/blog/2017/03/22/bootstrap-a-restful-api-app-with-node-es6-mongo-linux/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
